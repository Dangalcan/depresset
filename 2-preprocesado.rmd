---
title: "Depresset. Grupo 5 Preprocesado"
author: "Daniel Galván Cancio, Daniel Vela Camacho, Jaime Linares Barrera, Miguel Encina Martinez"
output: html_document
---

## Dataset escogido

Student depression: https://www.kaggle.com/datasets/adilshamim8/student-depression-dataset


# Proyecto sobre la depresión estudiantil

```{r}

  library(readr)
  library(tidyr)
  library(tidyverse)
  library(dplyr)
  library(ggplot2)
  library(lubridate)
  library(gapminder)
  library(plotly)
  library(caret)

```


```{r}
  # leer el csv
  ds <- read.csv("./data/student_depression_dataset.csv",sep=",")
  head(ds)
  dim(ds)

```

# Lectura y exploración del dataset**

```{r}

# Ver estructura y tipos de datos
str(ds)

# Nombres de columnas
colnames(ds)

# Resumen estadístico
summary(ds)

```
# Preprocesado

Como hay columnas que tienen variables con valores: "Yes" y "No", vamos a cambiar las columnas para que sus valores sean 1 en caso de "Yes" y 0 en caso de "No"

```{r}

ds <- ds %>%
  mutate(
    Have.you.ever.had.suicidal.thoughts.. = ifelse(Have.you.ever.had.suicidal.thoughts.. == "Yes", 1, 0),
    Family.History.of.Mental.Illness = ifelse(Family.History.of.Mental.Illness == "Yes", 1, 0)
  )


```

Además, como la mayoría de filas son de estudiantes, vamos a eliminar la profesión y vamos a eliminar aquellas filas
cuya profesión sea distinta de "Student"

```{r}

str(unique(ds$Profession))

```

Como las horas de sueño tienen valores categóricos que tienen cierto orden, vamos a discretizarlas. Hay un problema con esta vairable ya que al acotarlo en el intervalo, uno de los valores posible (Others) no tenía doble comillas. Además, vamos a eliminar aquellas filas cuyo valor en esa columna sea "Others"

```{r}
#Definimos los niveles de sueño de manera ordenada
sleep_order <- c(
  "'Less than 5 hours'",
  "'5-6 hours'",
  "'7-8 hours'",
  "'More than 8 hours'",
  "Others"
)

df_procesado <- ds %>%
  mutate(
    # Paso A: Creamos el Factor Ordenado
    Duracion_Sueno_Factor = factor(ds$Sleep.Duration,
      levels = sleep_order,
      ordered = TRUE
    ),

    # Paso B: Creamos la versión Numérica (del Factor)
    Duracion_Sueno_Num = as.numeric(Duracion_Sueno_Factor)
  )

df_procesado %>%
  # Agrupamos por la columna original, el factor y el número
  group_by(
    Original = Sleep.Duration,
    Factor_Ordenado = Duracion_Sueno_Factor,
    Numero_Codificado = Duracion_Sueno_Num
  ) %>%
  # Contamos cuántos hay de cada uno
  count()
```

```{r}


```

```{r}


```

```{r}


```

```{r}


```

